"""
ğŸ¤– JARVIS Menu System - ĞšĞ¾Ğ´ Ğ¼ĞµĞ½Ñ Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸
Ğ¡Ñ‚Ğ¸Ğ»ÑŒ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ° JARVIS Ğ¸Ğ· Iron Man

Ğ­Ñ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ» ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ¾Ğ´ Ğ¼ĞµĞ½Ñ Ğ´Ğ»Ñ Ğ´ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸.
ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ Ğ±Ğ¾Ñ‚Ğ° Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ² bot.py
"""

from aiogram.types import (
    ReplyKeyboardMarkup, 
    KeyboardButton, 
    ReplyKeyboardRemove,
    InlineKeyboardMarkup,
    InlineKeyboardButton
)


# ============================================================
# ğŸ® Ğ“Ğ›ĞĞ’ĞĞĞ• ĞœĞ•ĞĞ® (Reply-ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ° Ğ²Ğ½Ğ¸Ğ·Ñƒ ÑĞºÑ€Ğ°Ğ½Ğ°)
# ============================================================

class JarvisMenus:
    """ĞšĞ»Ğ°ÑÑ Ñ Ğ¼ĞµĞ½Ñ Ğ² ÑÑ‚Ğ¸Ğ»Ğµ JARVIS."""
    
    @staticmethod
    def get_main_menu() -> ReplyKeyboardMarkup:
        """
        Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ Ñ 5 ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸.
        ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚ÑÑ Ğ²Ğ½Ğ¸Ğ·Ñƒ ÑĞºÑ€Ğ°Ğ½Ğ°, Ğ·Ğ°Ğ¼ĞµĞ½ÑÑ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ.
        
        Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ğŸš€ ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· â”‚ ğŸ“Š ĞœĞ¾Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸   â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸    â”‚ ğŸ“ˆ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ       â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚          ğŸ“– Ğ¡Ğ¿Ñ€Ğ°Ğ²ĞºĞ°               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        """
        return ReplyKeyboardMarkup(
            keyboard=[
                [
                    KeyboardButton(text="ğŸš€ ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·"),
                    KeyboardButton(text="ğŸ“Š ĞœĞ¾Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸")
                ],
                [
                    KeyboardButton(text="âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸"),
                    KeyboardButton(text="ğŸ“ˆ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ")
                ],
                [
                    KeyboardButton(text="ğŸ“– Ğ¡Ğ¿Ñ€Ğ°Ğ²ĞºĞ°")
                ]
            ],
            resize_keyboard=True,      # Ğ£Ğ¼ĞµĞ½ÑŒÑˆĞ¸Ñ‚ÑŒ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº
            is_persistent=True         # ĞœĞµĞ½Ñ Ğ²ÑĞµĞ³Ğ´Ğ° Ğ²Ğ¸Ğ´Ğ½Ğ¾
        )
    
    @staticmethod
    def get_goal_keyboard() -> ReplyKeyboardMarkup:
        """
        ĞšĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ° Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ñ†ĞµĞ»Ğ¸ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ¸.
        ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°.
        """
        return ReplyKeyboardMarkup(
            keyboard=[
                [KeyboardButton(text="ğŸ¯ Ğ’Ğ²Ğ¾Ğ´Ğ½Ğ°Ñ/ĞºĞ²Ğ°Ğ»Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ")],
                [KeyboardButton(text="ğŸš€ Ğ¡Ğ¾Ğ³Ğ»Ğ°ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¸Ğ»Ğ¾Ñ‚Ğ°")],
                [KeyboardButton(text="ğŸ’¼ Ğ¢ĞšĞŸ")],
                [KeyboardButton(text="ğŸ”™ Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ")]
            ],
            resize_keyboard=True,
            one_time_keyboard=True  # Ğ¡ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»Ğµ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°
        )
    
    @staticmethod
    def get_cancel_keyboard() -> ReplyKeyboardMarkup:
        """ĞšĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ° Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ¾Ğ¹ Ğ¾Ñ‚Ğ¼ĞµĞ½Ñ‹."""
        return ReplyKeyboardMarkup(
            keyboard=[
                [KeyboardButton(text="âŒ ĞÑ‚Ğ¼ĞµĞ½Ğ°")]
            ],
            resize_keyboard=True
        )


# ============================================================
# âš™ï¸ ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜ (Inline-ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ¿Ğ¾Ğ´ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ĞµĞ¼)
# ============================================================

    @staticmethod
    def get_settings_inline() -> InlineKeyboardMarkup:
        """
        Inline-ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº.
        ĞŸĞ¾ÑĞ²Ğ»ÑÑÑ‚ÑÑ Ğ¿Ğ¾Ğ´ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ĞµĞ¼, Ğ½Ğµ Ğ·Ğ°Ğ¼ĞµĞ½ÑÑÑ‚ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ.
        
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ âš¡ Quick Mode: Ğ’ĞšĞ›/Ğ’Ğ«ĞšĞ›            â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ ğŸ”” Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ                      â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ ğŸŒ Ğ¯Ğ·Ñ‹Ğº Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ°                  â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ ğŸ”™ ĞĞ°Ğ·Ğ°Ğ´                            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        """
        return InlineKeyboardMarkup(
            inline_keyboard=[
                [
                    InlineKeyboardButton(
                        text="âš¡ Quick Mode: Ğ’Ğ«ĞšĞ›",
                        callback_data="toggle_quick_mode"
                    )
                ],
                [
                    InlineKeyboardButton(
                        text="ğŸ”” Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ",
                        callback_data="settings_notifications"
                    )
                ],
                [
                    InlineKeyboardButton(
                        text="ğŸŒ Ğ¯Ğ·Ñ‹Ğº Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ°",
                        callback_data="settings_language"
                    )
                ],
                [
                    InlineKeyboardButton(
                        text="ğŸ”™ ĞĞ°Ğ·Ğ°Ğ´",
                        callback_data="back_to_menu"
                    )
                ]
            ]
        )
    
    @staticmethod
    def get_task_actions(task_id: str) -> InlineKeyboardMarkup:
        """
        Inline-ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡ĞµĞ¹.
        ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡.
        """
        return InlineKeyboardMarkup(
            inline_keyboard=[
                [
                    InlineKeyboardButton(
                        text="ğŸ”„ ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ",
                        callback_data=f"repeat_task:{task_id}"
                    ),
                    InlineKeyboardButton(
                        text="ğŸ“¥ Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ²ÑĞµ",
                        callback_data=f"download_all:{task_id}"
                    )
                ],
                [
                    InlineKeyboardButton(
                        text="ğŸ—‘ï¸ Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ",
                        callback_data=f"delete_task:{task_id}"
                    )
                ]
            ]
        )


# ============================================================
# ğŸ¨ Ğ¡ĞĞĞ‘Ğ©Ğ•ĞĞ˜Ğ¯ Ğ’ Ğ¡Ğ¢Ğ˜Ğ›Ğ• JARVIS
# ============================================================

class JarvisUI:
    """Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ² ÑÑ‚Ğ¸Ğ»Ğµ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ° JARVIS."""
    
    @staticmethod
    def format_welcome(user_name: str = "ÑÑÑ€") -> str:
        """ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ."""
        return f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ¤– J.A.R.V.I.S. - BIMAR SYSTEM     â•‘
â•‘  Just A Rather Very Intelligent      â•‘
â•‘  Sales-assistant                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ğ”Ğ¾Ğ±Ñ€Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ, {user_name}. Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° JARVIS Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ **Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹:**

â€¢ ğŸš€ ĞĞ½Ğ°Ğ»Ğ¸Ğ· ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ¿Ğ¾ URL
â€¢ ğŸ“Š Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ 7 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
â€¢ ğŸ’° Ğ Ğ°ÑÑ‡ĞµÑ‚ ROI
â€¢ ğŸ“‹ ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğº Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğµ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ² Ğ¼ĞµĞ½Ñ Ğ½Ğ¸Ğ¶Ğµ ğŸ‘‡
"""

    @staticmethod
    def format_new_analysis_prompt() -> str:
        """Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ URL Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°."""
        return """
ğŸš€ **ĞĞĞ’Ğ«Ğ™ ĞĞĞĞ›Ğ˜Ğ—**

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ URL ÑĞ°Ğ¹Ñ‚Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸        â”‚
â”‚ Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ¿Ñ€ĞµÑĞµĞ¹Ğ»-Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: https://company.com

ğŸ’¡ Ğ¯ Ğ¿Ñ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»Ñ
   Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿Ğ°ĞºĞµÑ‚ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ·Ğ° 3-7 Ğ¼Ğ¸Ğ½ÑƒÑ‚
"""

    @staticmethod
    def format_my_tasks(tasks: list) -> str:
        """Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°Ğ´Ğ°Ñ‡ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ."""
        if not tasks:
            return """
ğŸ“Š **ĞœĞĞ˜ Ğ—ĞĞ”ĞĞ§Ğ˜**

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“­ Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿ÑƒÑÑ‚Ğ°                    â”‚
â”‚                                     â”‚
â”‚ Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ñ‡ĞµÑ€ĞµĞ·       â”‚
â”‚ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "ğŸš€ ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·"            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
"""
        
        tasks_text = """
ğŸ“Š **ĞœĞĞ˜ Ğ—ĞĞ”ĞĞ§Ğ˜**

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹:               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

"""
        for i, task in enumerate(tasks[-5:], 1):
            status_icon = "âœ…" if task.get("status") == "completed" else "â³"
            url = task.get("url", "")[:30]
            date = task.get("date", "")
            tasks_text += f"{i}. {status_icon} {url}...\n"
            tasks_text += f"   ğŸ“… {date}\n\n"
        
        return tasks_text

    @staticmethod
    def format_settings(quick_mode: bool, notifications: bool) -> str:
        """Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº."""
        return f"""
âš™ï¸ **ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜**

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš¡ Quick Mode: {'âœ… Ğ’ĞšĞ›' if quick_mode else 'âŒ Ğ’Ğ«ĞšĞ›'}
â”‚    ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞº Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ¾ Ñ†ĞµĞ»Ğ¸/Ğ¾Ğ³Ñ€.     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”” Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ: {'âœ… Ğ’ĞšĞ›' if notifications else 'âŒ Ğ’Ğ«ĞšĞ›'}
â”‚    ĞĞ¿Ğ¾Ğ²ĞµÑ‰ĞµĞ½Ğ¸Ñ Ğ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑĞµ             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŒ Ğ¯Ğ·Ñ‹Ğº: Ğ ÑƒÑÑĞºĞ¸Ğ¹                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ ğŸ‘‡
"""

    @staticmethod
    def format_status() -> str:
        """Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹."""
        from datetime import datetime
        return f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“ˆ Ğ¡Ğ¢ĞĞ¢Ğ£Ğ¡ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ«                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ JARVIS: **ĞĞ½Ğ»Ğ°Ğ¹Ğ½**               â”‚
â”‚ ğŸŸ¢ Manus API: **ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½**         â”‚
â”‚ ğŸŸ¢ Telegram: **ĞĞºÑ‚Ğ¸Ğ²ĞµĞ½**            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â° Ğ’Ñ€ĞµĞ¼Ñ: {datetime.now().strftime('%H:%M:%S')}
â”‚ ğŸ“… Ğ”Ğ°Ñ‚Ğ°: {datetime.now().strftime('%d.%m.%Y')}
â”‚ ğŸ”§ Ğ’ĞµÑ€ÑĞ¸Ñ: 2.1
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¤– JARVIS v2.1 | BIMAR SYSTEM
"""

    @staticmethod
    def format_help() -> str:
        """Ğ¡Ğ¿Ñ€Ğ°Ğ²ĞºĞ°."""
        return """
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“– Ğ¡ĞŸĞ ĞĞ’ĞšĞ JARVIS                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ® **Ğ“Ğ›ĞĞ’ĞĞĞ• ĞœĞ•ĞĞ®:**
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸš€ **ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·** â†’ Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€ĞµÑĞµĞ¹Ğ»Ğ°
ğŸ“Š **ĞœĞ¾Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸** â†’ Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
âš™ï¸ **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸** â†’ ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ±Ğ¾Ñ‚Ğ°
ğŸ“ˆ **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ** â†’ Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
ğŸ“– **Ğ¡Ğ¿Ñ€Ğ°Ğ²ĞºĞ°** â†’ Ğ­Ñ‚Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°

ğŸ“‹ **ĞšĞĞš Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ¬:**
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ "ğŸš€ ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·"
2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ URL ÑĞ°Ğ¹Ñ‚Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
3. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ñ†ĞµĞ»ÑŒ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ¸
4. Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ (Ğ¸Ğ»Ğ¸ "-")
5. Ğ”Ğ¾Ğ¶Ğ´Ğ¸Ñ‚ĞµÑÑŒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ (3-7 Ğ¼Ğ¸Ğ½)
6. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ 7 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²

ğŸ“¦ **Ğ“Ğ•ĞĞ•Ğ Ğ˜Ğ Ğ£Ğ•ĞœĞ«Ğ• Ğ”ĞĞšĞ£ĞœĞ•ĞĞ¢Ğ«:**
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ Deal_Brief.pdf
ğŸ—ºï¸ Use_Case_Map.xlsx
ğŸ’° ROI_Calc.xlsx
ğŸ“ Pilot_SOW.docx
ğŸ¯ MAP.xlsx
ğŸ“Š Mini_Deck.pptx
ğŸ“š Sources.md

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¤– JARVIS v2.1 | BIMAR SYSTEM
"""

    @staticmethod
    def format_progress(elapsed_seconds: int) -> str:
        """ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸."""
        minutes = int(elapsed_seconds // 60)
        seconds = int(elapsed_seconds % 60)
        
        phases = ["Ğ¡Ğ±Ğ¾Ñ€ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…", "ĞĞ½Ğ°Ğ»Ğ¸Ğ·", "Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ", "Ğ¤Ğ¸Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ"]
        current_phase_idx = min(int(elapsed_seconds / 90), 3)
        current_phase = phases[current_phase_idx]
        
        progress_bar = "â–ˆ" * (current_phase_idx + 1) + "â–‘" * (3 - current_phase_idx)
        
        return f"""
ğŸ”„ **ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°**

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â±ï¸ Ğ’Ñ€ĞµĞ¼Ñ: {minutes:02d}:{seconds:02d}
â”‚ ğŸ“Š ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ: [{progress_bar}]
â”‚ ğŸ”§ Ğ­Ñ‚Ğ°Ğ¿: {current_phase}
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
"""

    @staticmethod
    def format_completion(files_sent: int, elapsed_time: str) -> str:
        """Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğ¸."""
        return f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  âœ… ĞœĞ˜Ğ¡Ğ¡Ğ˜Ğ¯ Ğ’Ğ«ĞŸĞĞ›ĞĞ•ĞĞ                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: âœ… ĞŸĞĞ›ĞĞ«Ğ™
â”‚ ğŸ“ Ğ¤Ğ°Ğ¹Ğ»Ğ¾Ğ²: {files_sent}
â”‚ â±ï¸ Ğ’Ñ€ĞµĞ¼Ñ: {elapsed_time}
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ĞœĞ¸ÑÑĞ¸Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ°, ÑÑÑ€.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¼ĞµĞ½Ñ Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° ğŸ‘‡
"""


# ============================================================
# ğŸ“ ĞĞ‘Ğ ĞĞ‘ĞĞ¢Ğ§Ğ˜ĞšĞ˜ ĞšĞĞĞŸĞĞš
# ============================================================

"""
ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ² Ğ´Ğ»Ñ aiogram v3:

from aiogram import F
from aiogram.filters import Command

# Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ²
dp.message.register(start_handler, Command("start"))
dp.message.register(menu_handler, F.text.in_([
    "ğŸš€ ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·",
    "ğŸ“Š ĞœĞ¾Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸",
    "âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸",
    "ğŸ“ˆ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ",
    "ğŸ“– Ğ¡Ğ¿Ñ€Ğ°Ğ²ĞºĞ°"
]))
dp.callback_query.register(settings_callback_handler)


async def menu_handler(message: types.Message, state: FSMContext):
    '''ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¹ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½Ñ.'''
    
    text = message.text
    menus = JarvisMenus()
    ui = JarvisUI()
    
    if text == "ğŸš€ ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·":
        await message.answer(
            ui.format_new_analysis_prompt(),
            reply_markup=menus.get_cancel_keyboard(),
            parse_mode=ParseMode.MARKDOWN
        )
        await state.set_state(PresaleForm.waiting_for_url)
    
    elif text == "ğŸ“Š ĞœĞ¾Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸":
        tasks = user_tasks_history.get(message.from_user.id, [])
        await message.answer(
            ui.format_my_tasks(tasks),
            reply_markup=menus.get_main_menu(),
            parse_mode=ParseMode.MARKDOWN
        )
    
    elif text == "âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸":
        await message.answer(
            ui.format_settings(quick_mode=False, notifications=True),
            reply_markup=menus.get_settings_inline(),
            parse_mode=ParseMode.MARKDOWN
        )
    
    elif text == "ğŸ“ˆ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ":
        await message.answer(
            ui.format_status(),
            reply_markup=menus.get_main_menu(),
            parse_mode=ParseMode.MARKDOWN
        )
    
    elif text == "ğŸ“– Ğ¡Ğ¿Ñ€Ğ°Ğ²ĞºĞ°":
        await message.answer(
            ui.format_help(),
            reply_markup=menus.get_main_menu(),
            parse_mode=ParseMode.MARKDOWN
        )


async def settings_callback_handler(callback: CallbackQuery):
    '''ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº inline-ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº.'''
    
    data = callback.data
    
    if data == "toggle_quick_mode":
        # ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Quick Mode
        await callback.answer("Quick Mode Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½!")
    
    elif data == "settings_notifications":
        # ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
        await callback.answer("Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ñ‹!")
    
    elif data == "back_to_menu":
        await callback.message.edit_text("ğŸ  Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¼ĞµĞ½Ñ Ğ½Ğ¸Ğ¶Ğµ")
        await callback.answer()
"""


# ============================================================
# ğŸš€ Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ•
# ============================================================

if __name__ == "__main__":
    print("""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ¤– JARVIS Menu System              â•‘
â•‘  ĞšĞ¾Ğ´ Ğ¼ĞµĞ½Ñ Ğ´Ğ»Ñ Telegram Ğ±Ğ¾Ñ‚Ğ°         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ğ­Ñ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ» ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚:
â€¢ JarvisMenus - ĞºĞ»Ğ°ÑÑÑ‹ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€
â€¢ JarvisUI - ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ² ÑÑ‚Ğ¸Ğ»Ğµ JARVIS
â€¢ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ²

ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğ¹ ĞºĞ¾Ğ´ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ² bot.py
""")
